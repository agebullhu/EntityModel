<!--此标记表明此文件可被设计器更新,如果不允许此操作,请删除此行代码.design by:agebull designer date:2020/10/7 1:07:41-->
<!DOCTYPE html>
<html>
<head>
    <meta name='renderer' content='webkit' />
    <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=21' />
    <title>事件管理 > 事件定义</title>
    <meta charset='utf-8' />
    <meta name='viewport' content='width=device-width' />
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8-bom' />
    <!--font-awesome-->
    <link rel='stylesheet' type='text/css' href='http://cdn.staticfile.org/font-awesome/5.8.2/css/all.min.css'>
    <!--VUE-->
    <link rel='stylesheet' type='text/css' href='http://cdn.staticfile.org/element-ui/2.8.2/theme-chalk/index.css'>
    <script type='text/javascript' src='http://cdn.staticfile.org/vue/2.6.10/vue.js'></script>
    <script type='text/javascript' src='https://cdn.staticfile.org/axios/0.19.2/axios.min.js'></script>
    <script type='text/javascript' src='http://cdn.staticfile.org/element-ui/2.8.2/index.js'></script>
    <script type='text/javascript' src='http://cdn.staticfile.org/element-ui/2.8.2/locale/zh-CN.min.js'></script>
    <!--Extend-->
    <link rel='stylesheet' type='text/css' href='/styles/element-ui.css' />
    <script type='text/javascript' src='/scripts/extend.js'></script>
    <script type='text/javascript' src='/scripts/object.js'></script>
</head>
<body>
    <div id='work_space' class='tiled' v-cloak>
        <el-container>
            <el-header height='53px'>
                <div style='display: inline-block;padding:6px'>
                    <span>事件管理</span>&nbsp;<i class='el-icon-arrow-right'></i>&nbsp;<span>事件定义</span>
                    &nbsp;&nbsp;&nbsp;
                </div>
                <div class='toolRange'>
                    <el-input placeholder='请输入搜索内容' v-model='list.keyWords' class='input-with-select' clearable>
                        <el-select v-model='list.field' slot='prepend' placeholder='选择字段' style='width: 160px;'>
                            <el-option value='_any_' label='模糊查询'></el-option>
                            <el-option value='eventName' label='事件名称'></el-option>
                            <el-option value='eventCode' label='事件编码'></el-option>
                            <el-option value='version' label='版本号'></el-option>
                            <el-option value='region' label='领域范围'></el-option>
                            <el-option value='eventType' label='事件类型'></el-option>
                            <el-option value='resultOption' label='处理结果'></el-option>
                            <el-option value='successOption' label='成功判断'></el-option>
                            <el-option value='app' label='所属应用'></el-option>
                            <el-option value='classify' label='事件分类'></el-option>
                            <el-option value='tag' label='事件标签'></el-option>
                        </el-select>
                        <el-button slot='append' icon='el-icon-search' @click='doQuery'></el-button>
                    </el-input>
                </div>
                <div style='display: inline-block; float: right;padding:4px'>
                    <el-button-group>
                        <el-button icon='el-icon-refresh' @click='loadList'>刷新</el-button>
                        <!--el-button icon='fa fa-file-excel-o' type='success' @click='exportExcel'>导出</el-button-->
                        <el-button icon='el-icon-plus' @click='doAddNew'>新增</el-button>
                        <el-button icon='el-icon-edit' @click='doEdit'>编辑</el-button>
                        <el-button icon='el-icon-close' @click='doDelete'>删除</el-button>
                    </el-button-group>
                    <el-dropdown split-button @click='doEnable'>
                        <i class='el-icon-video-play'></i>启用
                        <el-dropdown-menu slot='dropdown'>
                            <el-dropdown-item command='Disable' icon='el-icon-video-pause'>禁用</el-dropdown-item>
                            <el-dropdown-item command='Reset' icon='el-icon-edit'>重置</el-dropdown-item>
                        </el-dropdown-menu>
                    </el-dropdown>
                </div>
            </el-header>
            <el-main>
                <!-- Grid -->
                <el-table :data='list.rows'
                          border
                          ref='dataTable'
                          highlight-current-row
                          @sort-change='onSort'
                          @row-dblclick='dblclick'
                          @current-change='currentRowChange'
                          @selection-change='selectionRowChange'
                          style='width:99%'>
                    <el-table-column type='selection'
                                     align='center'
                                     header-align='center'>
                    </el-table-column>
                    <el-table-column label='状态'
                                     align='center'
                                     header-align='center'
                                     width='50'>
                        <template slot-scope='scope'>
                            <i :class='scope.row.dataState | dataStateIcon'></i>
                        </template>
                    </el-table-column>
                    <el-table-column prop='eventName'
                                     header-align='center' align='left'
                                     label='事件名称'>
                    </el-table-column>
                    <el-table-column prop='eventCode'
                                     header-align='center' align='left'
                                     label='事件编码'>
                    </el-table-column>
                    <el-table-column prop='version'
                                     header-align='center' align='left'
                                     label='版本号'>
                    </el-table-column>
                    <el-table-column prop='region'
                                     header-align='center' align='left'
                                     label='领域范围'>
                        <template slot-scope='scope'>
                            <span style='margin-left: 3px'>
                                {{scope.row.region | regionTypeFormater}}
                            </span>
                        </template>
                    </el-table-column>
                    <el-table-column prop='eventType'
                                     header-align='center' align='left'
                                     label='事件类型'>
                        <template slot-scope='scope'>
                            <span style='margin-left: 3px'>
                                {{scope.row.eventType | eventTypeFormater}}
                            </span>
                        </template>
                    </el-table-column>
                    <el-table-column prop='resultOption'
                                     header-align='center' align='left'
                                     label='处理结果'>
                        <template slot-scope='scope'>
                            <span style='margin-left: 3px'>
                                {{scope.row.resultOption | resultOptionTypeFormater}}
                            </span>
                        </template>
                    </el-table-column>
                    <el-table-column prop='successOption'
                                     header-align='center' align='left'
                                     label='成功判断'>
                        <template slot-scope='scope'>
                            <span style='margin-left: 3px'>
                                {{scope.row.successOption | successOptionTypeFormater}}
                            </span>
                        </template>
                    </el-table-column>
                    <el-table-column prop='app'
                                     header-align='center' align='left'
                                     label='所属应用'>
                    </el-table-column>
                    <el-table-column prop='classify'
                                     header-align='center' align='left'
                                     label='事件分类'>
                    </el-table-column>
                    <el-table-column prop='tag'
                                     header-align='center' align='left'
                                     label='事件标签'>
                    </el-table-column>
                    <el-table-column type='expand'>
                        <template slot-scope='props'>
                            <div class='expand_line_block'>
                                <label class='expand_label'>事件备注：</label>
                                <span class='expand_value'>{{props.row.memo}}</span>
                            </div>
                            <div class='expand_block_1'>
                                <label class='expand_label'>目标类型：</label>
                                <span class='expand_value'>{{props.row.targetType}}</span>
                            </div>
                            <div class='expand_block_1'>
                                <label class='expand_label'>目标名称：</label>
                                <span class='expand_value'>{{props.row.targetName}}</span>
                            </div>
                            <div class='expand_line_block'>
                                <label class='expand_label'>目标说明：</label>
                                <span class='expand_value'>{{props.row.targetDescription}}</span>
                            </div>
                            <div class='expand_block_1'>
                                <label class='expand_label'>最后修改日期：</label>
                                <span class='expand_value'>{{props.row.lastModifyDate | formatDate}}</span>
                            </div>
                            <div class='expand_block_1'>
                                <label class='expand_label'>最后修改者：</label>
                                <span class='expand_value'>{{props.row.lastReviser}}</span>
                            </div>
                            <div class='expand_block_1'>
                                <label class='expand_label'>制作时间：</label>
                                <span class='expand_value'>{{props.row.addDate | formatDate}}</span>
                            </div>
                        </template>
                    </el-table-column>
                </el-table>
            </el-main>
            <el-footer height='42px'>
                <el-pagination @size-change='sizeChange'
                               @current-change='pageChange'
                               background
                               layout='total, sizes, prev, pager, next, jumper'
                               :current-page='list.page'
                               :page-sizes='list.pageSizes'
                               :page-size='list.pageSize'
                               :total='list.total'>
                </el-pagination>
            </el-footer>
        </el-container>
        <!--Form-->
        <el-dialog title='【事件定义】编辑'
                   :visible.sync='form.visible'
                   :show-close='false'
                   :close-on-click-modal='false'
                   width='894px'
                   v-loading='form.loading'
                   element-loading-text='正在处理'
                   element-loading-spinner='el-icon-loading'
                   element-loading-background='rgba(0, 0, 0, 0.8)'>
            <div class='el-dialog__body_form'>
                <el-form ref='dataForm'
                         :rules='form.rules'
                         :model='form.data'
                         label-width='100px'
                         label-position='left'
                         @submit.native.prevent>
                    <el-form-item label='事件名称' prop='eventName' label-suffix=''>
                        <el-input v-model='form.data.eventName' placeholder='事件名称' auto-complete='off' clearable :readonly='form.readonly'></el-input>
                    </el-form-item>
                    <el-form-item label='事件编码' prop='eventCode' label-suffix=''>
                        <el-input v-model='form.data.eventCode' placeholder='事件编码' auto-complete='off' clearable :readonly='form.readonly'></el-input>
                    </el-form-item>
                    <el-form-item label='版本号' prop='version' label-suffix=''>
                        <el-input v-model='form.data.version' placeholder='版本号' auto-complete='off' clearable :readonly='form.readonly'></el-input>
                    </el-form-item>
                    <el-form-item label='领域范围' prop='region' label-suffix=''>
                        <el-select v-model='form.data.region' :disabled='form.readonly' style='width:100%'>
                            <el-option v-for='item in types.regionType'
                                       :key='item.value'
                                       :label='item.label'
                                       :value='item.value'>
                            </el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label='事件类型' prop='eventType' label-suffix=''>
                        <el-select v-model='form.data.eventType' :disabled='form.readonly' style='width:100%'>
                            <el-option v-for='item in types.eventType'
                                       :key='item.value'
                                       :label='item.label'
                                       :value='item.value'>
                            </el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label='处理结果' prop='resultOption' label-suffix=''>
                        <el-select v-model='form.data.resultOption' :disabled='form.readonly' style='width:100%'>
                            <el-option v-for='item in types.resultOptionType'
                                       :key='item.value'
                                       :label='item.label'
                                       :value='item.value'>
                            </el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label='成功判断' prop='successOption' label-suffix=''>
                        <el-select v-model='form.data.successOption' :disabled='form.readonly' style='width:100%'>
                            <el-option v-for='item in types.successOptionType'
                                       :key='item.value'
                                       :label='item.label'
                                       :value='item.value'>
                            </el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label='所属应用' prop='app' label-suffix=''>
                        <el-input v-model='form.data.app' placeholder='所属应用' auto-complete='off' clearable :readonly='form.readonly'></el-input>
                    </el-form-item>
                    <el-form-item label='事件分类' prop='classify' label-suffix=''>
                        <el-input v-model='form.data.classify' placeholder='事件分类' auto-complete='off' clearable :readonly='form.readonly'></el-input>
                    </el-form-item>
                    <el-form-item label='事件标签' prop='tag' label-suffix=''>
                        <el-input v-model='form.data.tag' placeholder='事件标签' auto-complete='off' clearable :readonly='form.readonly'></el-input>
                    </el-form-item>
                    <el-form-item label='事件备注' prop='memo' label-suffix='' size='large'>
                        <el-input v-model='form.data.memo' placeholder='事件备注' auto-complete='off' clearable :readonly='form.readonly' type='textarea' :rows='5'></el-input>
                    </el-form-item>
                    <el-form-item label='目标类型' prop='targetType' label-suffix=''>
                        <el-input v-model='form.data.targetType' placeholder='*表示所有类型' auto-complete='off' clearable :readonly='form.readonly'></el-input>
                    </el-form-item>
                    <el-form-item label='目标名称' prop='targetName' label-suffix=''>
                        <el-input v-model='form.data.targetName' placeholder='*表示所有目标' auto-complete='off' clearable :readonly='form.readonly'></el-input>
                    </el-form-item>
                    <el-form-item label='目标说明' prop='targetDescription' label-suffix='' size='large'>
                        <el-input v-model='form.data.targetDescription' placeholder='目标说明' auto-complete='off' clearable :readonly='form.readonly' type='textarea' :rows='5'></el-input>
                    </el-form-item>
                </el-form>
            </div>
            <div slot='footer'>
                <el-button icon='el-icon-check' @click='save' type='primary' v-if='!form.readonly'>保存</el-button>
                <el-button icon='el-icon-close' @click='form.visible = false'>取消</el-button>
            </div>
        </el-dialog>
    </div>
    <script type='text/javascript' src='script.js'></script>
</body>
</html>